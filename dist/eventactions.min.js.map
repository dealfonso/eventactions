{"version":3,"file":"eventactions.min.js.map","sources":["eventactions.js"],"sourcesContent":["/**\n    MIT License\n\n    Copyright 2023 Carlos A. (https://github.com/dealfonso)\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in all\n    copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n    SOFTWARE.\n*/\n\n(function (exports) {\n\tif (typeof exports === \"undefined\") {\n\t\texports = window;\n\t}\n\tconst DEFAULT_OPTIONS_ACTION = {\n\t\tcondition: null,\n\t\tconditionAction: null,\n\t\tconfirm: null,\n\t\tconfirmAcceptText: \"OK\",\n\t\tconfirmCancelText: \"Cancel\",\n\t\texecute: null,\n\t\ttarget: null,\n\t\ttargetChildren: null,\n\t\tclassAdd: null,\n\t\tclassRemove: null,\n\t\tclassToggle: null,\n\t\tclassSet: null,\n\t\tscrollTo: null,\n\t\tcontentMethod: \"innerHTML\",\n\t\tcontentSet: null,\n\t\tcontentAppend: null,\n\t\tcontentPrepend: null,\n\t\tcontentClear: null,\n\t\tdelay: 0,\n\t\tacknowledge: null,\n\t\tacknowledgeButton: \"OK\",\n\t\tsplash: null\n\t};\n\tasync function executeAction(el, actionOptions) {\n\t\tactionOptions = Object.assign({}, EventActions.defaultActionOptions, actionOptions || {});\n\t\tlet targetElements = [];\n\t\tconst targetSelector = sanitizeValue(actionOptions.target || null);\n\t\tconst targetChildrenSelector = sanitizeValue(actionOptions.targetChildren || null);\n\t\tif (targetSelector === null && targetChildrenSelector === null) {\n\t\t\ttargetElements = [el];\n\t\t} else {\n\t\t\tif (targetSelector) {\n\t\t\t\ttry {\n\t\t\t\t\ttargetElements = [...targetElements, ...document.querySelectorAll(targetSelector)];\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn(`Error selecting elements with selector \"${targetSelector}\"`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetChildrenSelector) {\n\t\t\t\ttry {\n\t\t\t\t\ttargetElements = [...targetElements, ...el.querySelectorAll(targetChildrenSelector)];\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn(`Error selecting children with selector \"${targetChildrenSelector}\"`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst condition = sanitizeValue(actionOptions.condition || null);\n\t\tif (condition) {\n\t\t\tif (typeof condition === \"function\") {\n\t\t\t\tresult = condition.bind(el)(targetElements);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet result = function () {\n\t\t\t\t\treturn eval(condition);\n\t\t\t\t}.bind(el)(targetElements);\n\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\tresult = result.bind(el)(targetElements);\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Error evaluating condition \"${condition}\":`, error);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tconst conditionAction = sanitizeValue(actionOptions.conditionAction || null);\n\t\tlet shouldSkipAction = false;\n\t\tif (conditionAction) {\n\t\t\tif (typeof conditionAction === \"function\") {\n\t\t\t\tresult = conditionAction.bind(el)(targetElements);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet result = function () {\n\t\t\t\t\treturn eval(conditionAction);\n\t\t\t\t}.bind(el)(targetElements);\n\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\tresult = result.bind(el)(targetElements);\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\tshouldSkipAction = true;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Error evaluating action condition \"${conditionAction}\":`, error);\n\t\t\t\tshouldSkipAction = true;\n\t\t\t}\n\t\t}\n\t\tif (shouldSkipAction) {\n\t\t\treturn true;\n\t\t}\n\t\tconst confirmMessage = sanitizeValue(actionOptions.confirm || null);\n\t\tif (confirmMessage) {\n\t\t\tconst confirmAcceptText = sanitizeValue(actionOptions.confirmAcceptText || \"OK\");\n\t\t\tconst confirmCancelText = sanitizeValue(actionOptions.confirmCancelText || \"Cancel\");\n\t\t\ttry {\n\t\t\t\tawait confirmDialog(confirmMessage, confirmAcceptText, confirmCancelText);\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tconst execute = sanitizeValue(actionOptions.execute || null);\n\t\tif (execute) {\n\t\t\tif (typeof execute === \"function\") {\n\t\t\t\texecute.bind(el)(targetElements);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tlet result = function () {\n\t\t\t\t\t\treturn eval(execute);\n\t\t\t\t\t}.bind(el)();\n\t\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\t\tresult = result.bind(el)(targetElements);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(`Error executing action \"${execute}\":`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst classesAdd = sanitizeValue(actionOptions.classAdd || null);\n\t\tconst classesRemove = sanitizeValue(actionOptions.classRemove || null);\n\t\tconst classesToggle = sanitizeValue(actionOptions.classToggle || null);\n\t\tconst classesSet = sanitizeValue(actionOptions.classSet || null);\n\t\tconst classListAdd = classesAdd ? classesAdd.split(/\\s+/).filter(cls => cls.trim() !== \"\") : [];\n\t\tconst classListRemove = classesRemove ? classesRemove.split(/\\s+/).filter(cls => cls.trim() !== \"\") : [];\n\t\tconst classListToggle = classesToggle ? classesToggle.split(/\\s+/).filter(cls => cls.trim() !== \"\") : [];\n\t\tconst classListSet = classesSet ? classesSet.split(/\\s+/).filter(cls => cls.trim() !== \"\") : [];\n\t\tconst intersectionSR = classListAdd.filter(cls => classListRemove.includes(cls));\n\t\tconst intersectionST = classListAdd.filter(cls => classListToggle.includes(cls));\n\t\tconst intersectionRT = classListRemove.filter(cls => classListToggle.includes(cls));\n\t\tif (intersectionSR.length > 0 || intersectionST.length > 0 || intersectionRT.length > 0) {\n\t\t\tconsole.warn(\"Cannot set, unset or toggle the same class at the same time:\", {\n\t\t\t\tclassListAdd: classListAdd,\n\t\t\t\tclassListRemove: classListRemove,\n\t\t\t\tclassListToggle: classListToggle\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tlet applyClasses = () => {\n\t\t\tfor (const targetElement of targetElements) {\n\t\t\t\tif (classListSet.length > 0) {\n\t\t\t\t\ttargetElement.classList.remove(...targetElement.classList);\n\t\t\t\t\tclassListSet.forEach(cls => {\n\t\t\t\t\t\ttargetElement.classList.add(cls);\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (classListToggle.length > 0) {\n\t\t\t\t\tclassListToggle.forEach(cls => {\n\t\t\t\t\t\ttargetElement.classList.toggle(cls);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (classListAdd.length > 0) {\n\t\t\t\t\tclassListAdd.forEach(cls => {\n\t\t\t\t\t\ttargetElement.classList.add(cls);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (classListRemove.length > 0) {\n\t\t\t\t\tclassListRemove.forEach(cls => {\n\t\t\t\t\t\ttargetElement.classList.remove(cls);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst contentMethod = sanitizeValue(actionOptions.contentMethod || \"innerHTML\");\n\t\tif (![\"innerHTML\", \"textContent\"].includes(contentMethod)) {\n\t\t\tconsole.warn(`Invalid content method: ${contentMethod}`);\n\t\t\treturn;\n\t\t}\n\t\tconst contentSet = sanitizeValue(actionOptions.contentSet || null);\n\t\tconst contentAppend = sanitizeValue(actionOptions.contentAppend || null);\n\t\tconst contentPrepend = sanitizeValue(actionOptions.contentPrepend || null);\n\t\tconst contentClear = actionOptions.contentClear === true || actionOptions.contentClear === \"true\" || actionOptions.contentClear === \"\";\n\t\tlet applyContentChanges = () => {\n\t\t\tfor (const targetElement of targetElements) {\n\t\t\t\tif (contentClear) {\n\t\t\t\t\ttargetElement[contentMethod] = \"\";\n\t\t\t\t}\n\t\t\t\tif (contentSet) {\n\t\t\t\t\ttargetElement[contentMethod] = contentSet;\n\t\t\t\t}\n\t\t\t\tif (contentAppend) {\n\t\t\t\t\ttargetElement[contentMethod] += contentAppend;\n\t\t\t\t}\n\t\t\t\tif (contentPrepend) {\n\t\t\t\t\ttargetElement[contentMethod] = contentPrepend + targetElement[contentMethod];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst scrollTo = sanitizeValue(actionOptions.scrollTo || null);\n\t\tif (scrollTo && ![\"top\", \"bottom\", \"left\", \"right\"].includes(scrollTo)) {\n\t\t\tconsole.warn(`Invalid scroll-to value: ${scrollTo}`);\n\t\t\tscrollTo = null;\n\t\t}\n\t\tlet applyScroll = () => {\n\t\t\tif (!scrollTo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (const targetElement of targetElements) {\n\t\t\t\tswitch (scrollTo) {\n\t\t\t\tcase \"top\":\n\t\t\t\t\ttargetElement.scrollTop = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\ttargetElement.scrollTop = targetElement.scrollHeight;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\ttargetElement.scrollLeft = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\ttargetElement.scrollLeft = targetElement.scrollWidth;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\tconst delay = parseFloat(actionOptions.delay) || 0;\n\t\tif (delay > 0 && !isNaN(delay)) {\n\t\t\tawait new Promise(resolve => setTimeout(resolve, delay));\n\t\t}\n\t\tapplyClasses();\n\t\tapplyContentChanges();\n\t\tapplyScroll();\n\t\tconst acknowledgeMessage = sanitizeValue(actionOptions.acknowledge || null);\n\t\tconst acknowledgeButton = sanitizeValue(actionOptions.acknowledgeButton || \"OK\");\n\t\tif (acknowledgeMessage) {\n\t\t\tawait messageDialog(acknowledgeMessage, acknowledgeButton);\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction removeEventActions(el, eventType = null) {\n\t\tif (!el || !el._eventActions) return;\n\t\tif (!eventType) {\n\t\t\tfor (const type in el._eventActions) {\n\t\t\t\tremoveEventActions(el, type);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (!el._eventActions[eventType]) return;\n\t\tif (el._eventActions.handlers && el._eventActions.handlers[eventType]) {\n\t\t\tel.removeEventListener(eventType, el._eventActions.handlers[eventType]);\n\t\t\tdelete el._eventActions.handlers[eventType];\n\t\t}\n\t\tif (el._eventActions[eventType]) {\n\t\t\tel[`on${eventType}`] = el._eventActions[eventType];\n\t\t\tdelete el._eventActions[eventType];\n\t\t} else {\n\t\t\tel[`on${eventType}`] = null;\n\t\t}\n\t\tif (el._eventActions.handlers && Object.keys(el._eventActions.handlers).length === 0) {\n\t\t\tdelete el._eventActions;\n\t\t}\n\t}\n\n\tfunction addEventActions(el, eventType = \"click\", prefix = \"ca\") {\n\t\tif (!el) return;\n\t\tif (el._eventActions && el._eventActions[eventType]) return;\n\t\tel._eventActions = el._eventActions || {};\n\t\tel._eventActions[eventType] = el[`on${eventType}`] || null;\n\t\tel[`on${eventType}`] = null;\n\n\t\tfunction actionHandler(el, prefix) {\n\t\t\tlet handler = async function (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tlet conditionMet = true;\n\t\t\t\tlet splashDlg = null;\n\t\t\t\tlet options = getElementOptions(el, EventActions.defaultActionOptions, prefix, true);\n\t\t\t\tif (options && Object.keys(options).length > 0) {\n\t\t\t\t\toptions = Object.assign({}, EventActions.defaultActionOptions, options || {});\n\t\t\t\t\tconditionMet = await executeAction(el, options);\n\t\t\t\t\tif (conditionMet && options.splash) {\n\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsplashDlg = splashDialog(options.splash);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet i = 1;\n\t\t\t\twhile (conditionMet) {\n\t\t\t\t\toptions = getElementOptions(el, EventActions.defaultActionOptions, `${prefix}-${i}`, true);\n\t\t\t\t\tif (options && Object.keys(options).length > 0) {\n\t\t\t\t\t\tconst clearSplash = options.splash === null || options.splash === \"\" || options.splash === \"false\" || options.splash === \"0\" || options.splash === false;\n\t\t\t\t\t\toptions = Object.assign({}, EventActions.defaultActionOptions, options || {});\n\t\t\t\t\t\tconditionMet = await executeAction(el, options);\n\t\t\t\t\t\tif (clearSplash) {\n\t\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (conditionMet && options.splash) {\n\t\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsplashDlg = splashDialog(options.splash);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (conditionMet) {\n\t\t\t\t\toptions = getElementOptions(el, EventActions.defaultActionOptions, `${prefix}-last`, true);\n\t\t\t\t\tif (options && Object.keys(options).length > 0) {\n\t\t\t\t\t\toptions = Object.assign({}, EventActions.defaultActionOptions, options || {});\n\t\t\t\t\t\tawait executeAction(el, options);\n\t\t\t\t\t\tif (options.splash === null) {\n\t\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (conditionMet && options.splash) {\n\t\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsplashDlg = splashDialog(options.splash);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toptions = getElementOptions(el, EventActions.defaultActionOptions, `${prefix}-finally`, true);\n\t\t\t\tif (options && Object.keys(options).length > 0) {\n\t\t\t\t\toptions = Object.assign({}, EventActions.defaultActionOptions, options || {});\n\t\t\t\t\tawait executeAction(el, options);\n\t\t\t\t\tif (options.splash === null) {\n\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (conditionMet && options.splash) {\n\t\t\t\t\t\tif (splashDlg) {\n\t\t\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t\t\t\tsplashDlg = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsplashDlg = splashDialog(options.splash);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (conditionMet) {\n\t\t\t\t\tif (el._eventActions && el._eventActions[eventType]) {\n\t\t\t\t\t\tel._eventActions[eventType].bind(el)(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (splashDlg) {\n\t\t\t\t\tsplashDlg.modal.hide();\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn handler;\n\t\t}\n\n\t\tfunction addHandler(el, eventType, handler) {\n\t\t\tel.addEventListener(eventType, handler);\n\t\t\tel._eventActions.handlers = el._eventActions.handlers || {};\n\t\t\tel._eventActions.handlers[eventType] = handler;\n\t\t}\n\t\taddHandler(el, eventType, actionHandler(el, prefix));\n\t}\n\tconst EventActions = {\n\t\texecute: executeAction,\n\t\taddEventActions: addEventActions,\n\t\taddClickActions: el => addEventActions(el, \"click\", \"ca\"),\n\t\taddScrollActions: el => addEventActions(el, \"scroll\", \"sa\"),\n\t\tremoveEventActions: removeEventActions,\n\t\tremoveClickActions: el => removeEventActions(el, \"click\"),\n\t\tremoveScrollActions: el => removeEventActions(el, \"scroll\"),\n\t\tdefaultActionOptions: DEFAULT_OPTIONS_ACTION,\n\t\tversion: \"1.0.0\"\n\t};\n\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\tconst selectorsClick = Object.keys(EventActions.defaultActionOptions).map(opt => `[data-ca-${camelToSnakeCase(opt)}],[data-ca-1-${camelToSnakeCase(opt)}]`).join(\",\");\n\t\tconst selectorsScroll = Object.keys(EventActions.defaultActionOptions).map(opt => `[data-sa-${camelToSnakeCase(opt)}],[data-sa-1-${camelToSnakeCase(opt)}]`).join(\",\");\n\t\tdocument.querySelectorAll(`${selectorsClick}`).forEach(el => {\n\t\t\taddEventActions(el, \"click\", \"ca\");\n\t\t});\n\t\tdocument.querySelectorAll(`${selectorsScroll}`).forEach(el => {\n\t\t\taddEventActions(el, \"scroll\", \"sa\");\n\t\t});\n\t});\n\texports.EventActions = EventActions;\n\n\tfunction snakeToCamelCase(str) {\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\n\tfunction camelToSnakeCase(str) {\n\t\tstr = str.replace(/([0-9]+)/g, g => `-${g}`);\n\t\tstr = str.replace(/[A-Z]/g, g => `-${g[0].toLowerCase()}`);\n\t\tstr = str.replace(/--+/g, \"-\");\n\t\tstr = str.replace(/^-+/, \"\").replace(/-+$/, \"\");\n\t\treturn str;\n\t}\n\n\tfunction sanitizeValue(value) {\n\t\tif (value === null || value === undefined) {\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof value !== \"string\") {\n\t\t\treturn value;\n\t\t}\n\t\tvalue = value.trim();\n\t\tif (value === \"\") {\n\t\t\treturn null;\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction getElementOptions(el, defaultOptions, prefix, onlyExisting = false) {\n\t\tlet options = {};\n\t\tconst prefixStr = prefix ? `${camelToSnakeCase(prefix)}-` : \"\";\n\t\tfor (const option of Object.keys(defaultOptions)) {\n\t\t\tconst attributeName = prefixStr + camelToSnakeCase(option);\n\t\t\tconst attributeValue = el.dataset[attributeName] || el.getAttribute(`data-${attributeName}`);\n\t\t\tif (attributeValue !== null && attributeValue !== undefined) {\n\t\t\t\tif (typeof defaultOptions[option] === \"boolean\") {\n\t\t\t\t\toptions[option] = attributeValue.toLowerCase() === \"true\";\n\t\t\t\t} else if (typeof defaultOptions[option] === \"number\") {\n\t\t\t\t\toptions[option] = parseFloat(attributeValue);\n\t\t\t\t} else {\n\t\t\t\t\toptions[option] = attributeValue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!onlyExisting) {\n\t\t\t\t\toptions[option] = defaultOptions[option];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\tconst DEFAULT_MODAL_OPTIONS = {\n\t\ttitle: null,\n\t\tbody: null,\n\t\tbtnAcceptText: \"Accept\",\n\t\tbtnCancelText: \"Cancel\",\n\t\tbtnAcceptClass: \"btn-primary\",\n\t\tbtnCancelClass: \"btn-secondary\",\n\t\tsize: \"md\",\n\t\tcentered: true,\n\t\tbackdrop: \"static\",\n\t\tkeyboard: true,\n\t\tfocus: true,\n\t\tonAccept: null,\n\t\tonCancel: null,\n\t\tonShow: null,\n\t\tonShown: null,\n\t\tonHide: null,\n\t\tonHidden: null,\n\t\tautoShow: true\n\t};\n\n\tfunction confirmDialog(message, btnAcceptText = \"Accept\", btnCancelText = \"Cancel\", title = null) {\n\t\tconst modalDialog = bsCreateModal({\n\t\t\ttitle: title,\n\t\t\tbody: message,\n\t\t\tbtnAcceptText: btnAcceptText,\n\t\t\tbtnCancelText: btnCancelText\n\t\t});\n\t\tif (!modalDialog) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (window.confirm(message)) {\n\t\t\t\t\tresolve(true);\n\t\t\t\t} else {\n\t\t\t\t\treject(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn modalDialog;\n\t}\n\n\tfunction messageDialog(message, btnAcceptText = \"OK\", title = null) {\n\t\tconst modalDialog = bsCreateModal({\n\t\t\ttitle: title,\n\t\t\tbody: message,\n\t\t\tbtnAcceptText: btnAcceptText,\n\t\t\tbtnCancelText: null\n\t\t});\n\t\tif (!modalDialog) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\twindow.alert(message);\n\t\t\t\tresolve(true);\n\t\t\t});\n\t\t}\n\t\treturn modalDialog;\n\t}\n\n\tfunction splashDialog(splashContent = '<div class=\"spinner-border\" role=\"status\" aria-hidden=\"true\"></div>', title = null) {\n\t\tconst modalDialog = bsCreateModal({\n\t\t\ttitle: title,\n\t\t\tbody: splashContent,\n\t\t\tbtnAcceptText: null,\n\t\t\tbtnCancelText: null,\n\t\t\tbackdrop: \"static\",\n\t\t\tkeyboard: false,\n\t\t\tfocus: false\n\t\t});\n\t\treturn modalDialog;\n\t}\n\n\tfunction bsCreateModal(options = {}) {\n\t\tif (typeof bootstrap === \"undefined\" || !bootstrap.Modal) {\n\t\t\tconsole.warn(\"bsCreateModal: Bootstrap 5 is required for this function to work.\");\n\t\t\treturn null;\n\t\t}\n\t\toptions = Object.assign({}, DEFAULT_MODAL_OPTIONS, options || {});\n\t\tif (!options.title && !options.body && !options.btnAcceptText && !options.btnCancelText) {\n\t\t\tconsole.error(\"bsCreateModal: At least one of title, body, btnAcceptText or btnCancelText must be provided\");\n\t\t\treturn null;\n\t\t}\n\t\tif ([\"sm\", \"md\", \"lg\", \"xl\", \"xxl\"].indexOf(options.size) === -1) {\n\t\t\toptions.size = \"md\";\n\t\t}\n\t\tif (options.size === \"md\") {\n\t\t\toptions.size = \"\";\n\t\t} else {\n\t\t\toptions.size = `modal-${options.size}`;\n\t\t}\n\t\tif (typeof options.centered !== \"boolean\") {\n\t\t\toptions.centered = DEFAULT_MODAL_OPTIONS.centered;\n\t\t}\n\t\tif (options.backdrop !== true && options.backdrop !== false && options.backdrop !== \"static\") {\n\t\t\toptions.backdrop = DEFAULT_MODAL_OPTIONS.backdrop;\n\t\t}\n\t\tif (typeof options.keyboard !== \"boolean\") {\n\t\t\toptions.keyboard = DEFAULT_MODAL_OPTIONS.keyboard;\n\t\t}\n\t\tif (typeof options.focus !== \"boolean\") {\n\t\t\toptions.focus = DEFAULT_MODAL_OPTIONS.focus;\n\t\t}\n\t\tif (options.btnAcceptText !== null && typeof options.btnAcceptText !== \"string\") {\n\t\t\toptions.btnAcceptText = DEFAULT_MODAL_OPTIONS.btnAcceptText;\n\t\t}\n\t\tif (options.btnCancelText !== null && typeof options.btnCancelText !== \"string\") {\n\t\t\toptions.btnCancelText = DEFAULT_MODAL_OPTIONS.btnCancelText;\n\t\t}\n\t\tif (options.autoShow !== true && options.autoShow !== false) {\n\t\t\toptions.autoShow = DEFAULT_MODAL_OPTIONS.autoShow;\n\t\t}\n\t\toptions.btnAcceptText = sanitizeValue(options.btnAcceptText);\n\t\toptions.btnCancelText = sanitizeValue(options.btnCancelText);\n\t\toptions.title = sanitizeValue(options.title);\n\t\toptions.body = sanitizeValue(options.body);\n\t\tif (options.onAccept && typeof options.onAccept !== \"function\") {\n\t\t\toptions.onAccept = null;\n\t\t}\n\t\tif (options.onCancel && typeof options.onCancel !== \"function\") {\n\t\t\toptions.onCancel = null;\n\t\t}\n\t\tif (options.onShow && typeof options.onShow !== \"function\") {\n\t\t\toptions.onShow = null;\n\t\t}\n\t\tif (options.onShown && typeof options.onShown !== \"function\") {\n\t\t\toptions.onShown = null;\n\t\t}\n\t\tif (options.onHide && typeof options.onHide !== \"function\") {\n\t\t\toptions.onHide = null;\n\t\t}\n\t\tif (options.onHidden && typeof options.onHidden !== \"function\") {\n\t\t\toptions.onHidden = null;\n\t\t}\n\t\tlet modalContainer = document.createElement(\"div\");\n\t\tmodalContainer.innerHTML = `\n<div class=\"modal ${options.size}\" tabindex=\"-1\" ${options.backdrop === false ? 'data-bs-backdrop=\"false\"' : options.backdrop === \"static\" ? 'data-bs-backdrop=\"static\"' : \"\"} ${options.keyboard === false ? 'data-bs-keyboard=\"false\"' : \"\"} ${options.focus === false ? 'data-bs-focus=\"false\"' : \"\"}\">\n  <div class=\"modal-dialog ${options.centered ? \"modal-dialog-centered\" : \"\"}\">\n    <div class=\"modal-content\">\n      ${options.title === null ? \"\" : `<div class=\"modal-header\"><h5 class=\"modal-title\">${options.title}</h5></div>`}\n      ${options.body === null ? \"\" : `<div class=\"modal-body\">${options.body}</div>`}\n      ${options.btnAcceptText === null && options.btnCancelText === null ? \"\" : `\n      <div class=\"modal-footer\">\n        ${options.btnCancelText === null ? \"\" : `<button type=\"button\" class=\"btn ${options.btnCancelClass}\" data-bs-dismiss=\"modal\">${options.btnCancelText}</button>`}\n        ${options.btnAcceptText === null ? \"\" : `<button type=\"button\" class=\"btn ${options.btnAcceptClass}\">${options.btnAcceptText}</button>`}\n      </div>`}\n    </div>\n  </div>\n</div>`;\n\t\tconst acceptButton = modalContainer.querySelector(\".btn-primary\");\n\t\tconst cancelButton = modalContainer.querySelector(\".btn-secondary\");\n\t\tconst modalElement = modalContainer.querySelector(\".modal\");\n\t\tdocument.body.appendChild(modalContainer);\n\t\tconst modal = new bootstrap.Modal(modalElement);\n\t\toptions = Object.assign({}, DEFAULT_MODAL_OPTIONS, options || {});\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tif (options.btnAcceptText) {\n\t\t\t\tacceptButton.addEventListener(\"click\", e => {\n\t\t\t\t\tif (options.onAccept && typeof options.onAccept === \"function\") {\n\t\t\t\t\t\toptions.onAccept(e, modalElement);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(\"accept\");\n\t\t\t\t\tmodal.hide();\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.btnCancelText) {\n\t\t\t\tcancelButton.addEventListener(\"click\", e => {\n\t\t\t\t\tif (options.onCancel && typeof options.onCancel === \"function\") {\n\t\t\t\t\t\toptions.onCancel(e, modalElement);\n\t\t\t\t\t}\n\t\t\t\t\treject(\"cancel\");\n\t\t\t\t\tmodal.hide();\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.keyboard === true) {\n\t\t\t\tmodalElement.addEventListener(\"keydown\", e => {\n\t\t\t\t\tif (e.key === \"Escape\") {\n\t\t\t\t\t\tif (options.onCancel && typeof options.onCancel === \"function\") {\n\t\t\t\t\t\t\toptions.onCancel(e, modalElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(\"cancel\");\n\t\t\t\t\t\tmodal.hide();\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.onShow && typeof options.onShow === \"function\") {\n\t\t\t\tmodalElement.addEventListener(\"show.bs.modal\", e => {\n\t\t\t\t\toptions.onShow(e, modalElement);\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.onShown && typeof options.onShown === \"function\") {\n\t\t\t\tmodalElement.addEventListener(\"shown.bs.modal\", e => {\n\t\t\t\t\toptions.onShown(e, modalElement);\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.onHide && typeof options.onHide === \"function\") {\n\t\t\t\tmodalElement.addEventListener(\"hide.bs.modal\", e => {\n\t\t\t\t\toptions.onHide(e, modalElement);\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (options.onHidden && typeof options.onHidden === \"function\") {\n\t\t\t\tmodalElement.addEventListener(\"hidden.bs.modal\", e => {\n\t\t\t\t\toptions.onHidden(e, modalElement);\n\t\t\t\t}, {\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tmodalElement.addEventListener(\"hide.bs.modal\", function (event) {\n\t\t\t\tif (document.activeElement) {\n\t\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodalElement.addEventListener(\"hidden.bs.modal\", e => {\n\t\t\t\tmodal.dispose();\n\t\t\t\tmodalContainer.remove();\n\t\t\t}, {\n\t\t\t\tonce: true\n\t\t\t});\n\t\t});\n\t\tmodal.show();\n\t\tpromise.modal = modal;\n\t\treturn promise;\n\t}\n})(window);\n"],"names":["exports","window","DEFAULT_OPTIONS_ACTION","condition","conditionAction","confirm","confirmAcceptText","confirmCancelText","execute","target","targetChildren","classAdd","classRemove","classToggle","classSet","scrollTo","contentMethod","contentSet","contentAppend","contentPrepend","contentClear","delay","acknowledge","acknowledgeButton","splash","async","executeAction","el","actionOptions","Object","assign","EventActions","defaultActionOptions","let","targetElements","targetSelector","sanitizeValue","targetChildrenSelector","document","querySelectorAll","error","console","warn","result","bind","eval","shouldSkipAction","confirmMessage","await","confirmDialog","classesAdd","classesRemove","classesToggle","classesSet","classListAdd","split","filter","cls","trim","classListRemove","classListToggle","classListSet","intersectionSR","includes","intersectionST","intersectionRT","length","applyClasses","targetElement","classList","remove","forEach","add","toggle","applyContentChanges","applyScroll","scrollTop","scrollHeight","scrollLeft","scrollWidth","parseFloat","isNaN","Promise","resolve","setTimeout","acknowledgeMessage","messageDialog","removeEventActions","eventType","_eventActions","type","handlers","removeEventListener","keys","addEventActions","prefix","actionHandler","handler","event","preventDefault","stopPropagation","conditionMet","splashDlg","options","getElementOptions","modal","hide","splashDialog","i","clearSplash","addHandler","addEventListener","addClickActions","addScrollActions","removeClickActions","removeScrollActions","version","selectorsClick","map","opt","camelToSnakeCase","join","selectorsScroll","snakeToCamelCase","str","replace","g","toUpperCase","toLowerCase","value","undefined","defaultOptions","onlyExisting","prefixStr","option","attributeName","attributeValue","dataset","getAttribute","DEFAULT_MODAL_OPTIONS","title","body","btnAcceptText","btnCancelText","btnAcceptClass","btnCancelClass","size","centered","backdrop","keyboard","focus","onAccept","onCancel","onShow","onShown","onHide","onHidden","autoShow","message","modalDialog","bsCreateModal","reject","alert","splashContent","bootstrap","Modal","indexOf","modalContainer","createElement","innerHTML","acceptButton","querySelector","cancelButton","modalElement","appendChild","promise","e","once","key","activeElement","blur","dispose","show"],"mappings":";CAwBA,SAAWA,SACV,GAAI,OAAOA,UAAY,YAAa,CACnCA,QAAUC,MACX,CACA,MAAMC,uBAAyB,CAC9BC,UAAW,KACXC,gBAAiB,KACjBC,QAAS,KACTC,kBAAmB,KACnBC,kBAAmB,SACnBC,QAAS,KACTC,OAAQ,KACRC,eAAgB,KAChBC,SAAU,KACVC,YAAa,KACbC,YAAa,KACbC,SAAU,KACVC,SAAU,KACVC,cAAe,YACfC,WAAY,KACZC,cAAe,KACfC,eAAgB,KAChBC,aAAc,KACdC,MAAO,EACPC,YAAa,KACbC,kBAAmB,KACnBC,OAAQ,IACT,EACAC,eAAeC,cAAcC,GAAIC,eAChCA,cAAgBC,OAAOC,OAAO,GAAIC,aAAaC,qBAAsBJ,eAAiB,EAAE,EACxFK,IAAIC,eAAiB,GACrB,MAAMC,eAAiBC,cAAcR,cAAcnB,QAAU,IAAI,EACjE,MAAM4B,uBAAyBD,cAAcR,cAAclB,gBAAkB,IAAI,EACjF,GAAIyB,iBAAmB,MAAQE,yBAA2B,KAAM,CAC/DH,eAAiB,CAACP,GACnB,KAAO,CACN,GAAIQ,eAAgB,CACnB,IACCD,eAAiB,CAAC,GAAGA,eAAgB,GAAGI,SAASC,iBAAiBJ,cAAc,EAGjF,CAFE,MAAOK,OACRC,QAAQC,gDAAgDP,kBAAmBK,KAAK,CACjF,CACD,CACA,GAAIH,uBAAwB,CAC3B,IACCH,eAAiB,CAAC,GAAGA,eAAgB,GAAGP,GAAGY,iBAAiBF,sBAAsB,EAGnF,CAFE,MAAOG,OACRC,QAAQC,gDAAgDL,0BAA2BG,KAAK,CACzF,CACD,CACD,CACA,MAAMrC,UAAYiC,cAAcR,cAAczB,WAAa,IAAI,EAC/D,GAAIA,UAAW,CACd,GAAI,OAAOA,YAAc,WAAY,CACpCwC,OAASxC,UAAUyC,KAAKjB,EAAE,EAAEO,cAAc,EAC1C,GAAI,CAACS,OAAQ,CACZ,OAAO,KACR,CACA,OAAO,IACR,CACA,IACCV,IAAIU,OAAS,WACZ,OAAOE,KAAK1C,SAAS,CACtB,EAAEyC,KAAKjB,EAAE,EAAEO,cAAc,EACzB,GAAI,OAAOS,SAAW,WAAY,CACjCA,OAASA,OAAOC,KAAKjB,EAAE,EAAEO,cAAc,CACxC,CACA,GAAI,CAACS,OAAQ,CACZ,OAAO,KACR,CAID,CAHE,MAAOH,OACRC,QAAQD,qCAAqCrC,cAAeqC,KAAK,EACjE,OAAO,KACR,CACD,CACA,MAAMpC,gBAAkBgC,cAAcR,cAAcxB,iBAAmB,IAAI,EAC3E6B,IAAIa,iBAAmB,MACvB,GAAI1C,gBAAiB,CACpB,GAAI,OAAOA,kBAAoB,WAAY,CAC1CuC,OAASvC,gBAAgBwC,KAAKjB,EAAE,EAAEO,cAAc,EAChD,GAAI,CAACS,OAAQ,CACZ,OAAO,IACR,CACD,CACA,IACCV,IAAIU,OAAS,WACZ,OAAOE,KAAKzC,eAAe,CAC5B,EAAEwC,KAAKjB,EAAE,EAAEO,cAAc,EACzB,GAAI,OAAOS,SAAW,WAAY,CACjCA,OAASA,OAAOC,KAAKjB,EAAE,EAAEO,cAAc,CACxC,CACA,GAAI,CAACS,OAAQ,CACZG,iBAAmB,IACpB,CAID,CAHE,MAAON,OACRC,QAAQD,4CAA4CpC,oBAAqBoC,KAAK,EAC9EM,iBAAmB,IACpB,CACD,CACA,GAAIA,iBAAkB,CACrB,OAAO,IACR,CACA,MAAMC,eAAiBX,cAAcR,cAAcvB,SAAW,IAAI,EAClE,GAAI0C,eAAgB,CACnB,MAAMzC,kBAAoB8B,cAAcR,cAActB,mBAAqB,IAAI,EAC/E,MAAMC,kBAAoB6B,cAAcR,cAAcrB,mBAAqB,QAAQ,EACnF,IACCyC,MAAMC,cAAcF,eAAgBzC,kBAAmBC,iBAAiB,CAGzE,CAFE,MAAOiC,OACR,OAAO,KACR,CACD,CACA,MAAMhC,QAAU4B,cAAcR,cAAcpB,SAAW,IAAI,EAC3D,GAAIA,QAAS,CACZ,GAAI,OAAOA,UAAY,WAAY,CAClCA,QAAQoC,KAAKjB,EAAE,EAAEO,cAAc,CAChC,KAAO,CACN,IACCD,IAAIU,OAAS,WACZ,OAAOE,KAAKrC,OAAO,CACpB,EAAEoC,KAAKjB,EAAE,EAAE,EACX,GAAI,OAAOgB,SAAW,WAAY,CACjCA,OAASA,OAAOC,KAAKjB,EAAE,EAAEO,cAAc,CACxC,CAGD,CAFE,MAAOM,OACRC,QAAQD,iCAAiChC,YAAagC,KAAK,CAC5D,CACD,CACD,CACA,MAAMU,WAAad,cAAcR,cAAcjB,UAAY,IAAI,EAC/D,MAAMwC,cAAgBf,cAAcR,cAAchB,aAAe,IAAI,EACrE,MAAMwC,cAAgBhB,cAAcR,cAAcf,aAAe,IAAI,EACrE,MAAMwC,WAAajB,cAAcR,cAAcd,UAAY,IAAI,EAC/D,MAAMwC,aAAeJ,WAAaA,WAAWK,MAAM,KAAK,EAAEC,OAAOC,GAAOA,EAAIC,KAAK,IAAM,EAAE,EAAI,GAC7F,MAAMC,gBAAkBR,cAAgBA,cAAcI,MAAM,KAAK,EAAEC,OAAOC,GAAOA,EAAIC,KAAK,IAAM,EAAE,EAAI,GACtG,MAAME,gBAAkBR,cAAgBA,cAAcG,MAAM,KAAK,EAAEC,OAAOC,GAAOA,EAAIC,KAAK,IAAM,EAAE,EAAI,GACtG,MAAMG,aAAeR,WAAaA,WAAWE,MAAM,KAAK,EAAEC,OAAOC,GAAOA,EAAIC,KAAK,IAAM,EAAE,EAAI,GAC7F,MAAMI,eAAiBR,aAAaE,OAAOC,GAAOE,gBAAgBI,SAASN,CAAG,CAAC,EAC/E,MAAMO,eAAiBV,aAAaE,OAAOC,GAAOG,gBAAgBG,SAASN,CAAG,CAAC,EAC/E,MAAMQ,eAAiBN,gBAAgBH,OAAOC,GAAOG,gBAAgBG,SAASN,CAAG,CAAC,EAClF,GAAIK,eAAeI,OAAS,GAAKF,eAAeE,OAAS,GAAKD,eAAeC,OAAS,EAAG,CACxFzB,QAAQC,KAAK,+DAAgE,CAC5EY,aAAcA,aACdK,gBAAiBA,gBACjBC,gBAAiBA,eAClB,CAAC,EACD,OAAO,KACR,CACA3B,IAAIkC,aAAe,KAClB,IAAK,MAAMC,KAAiBlC,eAAgB,CAC3C,GAAI2B,aAAaK,OAAS,EAAG,CAC5BE,EAAcC,UAAUC,OAAO,GAAGF,EAAcC,SAAS,EACzDR,aAAaU,QAAQd,IACpBW,EAAcC,UAAUG,IAAIf,CAAG,CAChC,CAAC,EACD,QACD,CACA,GAAIG,gBAAgBM,OAAS,EAAG,CAC/BN,gBAAgBW,QAAQd,IACvBW,EAAcC,UAAUI,OAAOhB,CAAG,CACnC,CAAC,CACF,CACA,GAAIH,aAAaY,OAAS,EAAG,CAC5BZ,aAAaiB,QAAQd,IACpBW,EAAcC,UAAUG,IAAIf,CAAG,CAChC,CAAC,CACF,CACA,GAAIE,gBAAgBO,OAAS,EAAG,CAC/BP,gBAAgBY,QAAQd,IACvBW,EAAcC,UAAUC,OAAOb,CAAG,CACnC,CAAC,CACF,CACD,CACD,EACA,MAAMzC,cAAgBoB,cAAcR,cAAcZ,eAAiB,WAAW,EAC9E,GAAI,CAAC,CAAC,YAAa,eAAe+C,SAAS/C,aAAa,EAAG,CAC1DyB,QAAQC,gCAAgC1B,eAAe,EACvD,MACD,CACA,MAAMC,WAAamB,cAAcR,cAAcX,YAAc,IAAI,EACjE,MAAMC,cAAgBkB,cAAcR,cAAcV,eAAiB,IAAI,EACvE,MAAMC,eAAiBiB,cAAcR,cAAcT,gBAAkB,IAAI,EACzE,MAAMC,aAAeQ,cAAcR,eAAiB,MAAQQ,cAAcR,eAAiB,QAAUQ,cAAcR,eAAiB,GACpIa,IAAIyC,oBAAsB,KACzB,IAAK,MAAMN,KAAiBlC,eAAgB,CAC3C,GAAId,aAAc,CACjBgD,EAAcpD,eAAiB,EAChC,CACA,GAAIC,WAAY,CACfmD,EAAcpD,eAAiBC,UAChC,CACA,GAAIC,cAAe,CAClBkD,EAAcpD,gBAAkBE,aACjC,CACA,GAAIC,eAAgB,CACnBiD,EAAcpD,eAAiBG,eAAiBiD,EAAcpD,cAC/D,CACD,CACD,EACA,MAAMD,SAAWqB,cAAcR,cAAcb,UAAY,IAAI,EAC7D,GAAIA,UAAY,CAAC,CAAC,MAAO,SAAU,OAAQ,SAASgD,SAAShD,QAAQ,EAAG,CACvE0B,QAAQC,iCAAiC3B,UAAU,EACnDA,SAAW,IACZ,CACAkB,IAAI0C,YAAc,KACjB,GAAI,CAAC5D,SAAU,CACd,MACD,CACA,IAAK,MAAMqD,KAAiBlC,eAAgB,CAC3C,OAAQnB,UACR,IAAK,MACJqD,EAAcQ,UAAY,EAC1B,MACD,IAAK,SACJR,EAAcQ,UAAYR,EAAcS,aACxC,MACD,IAAK,OACJT,EAAcU,WAAa,EAC3B,MACD,IAAK,QACJV,EAAcU,WAAaV,EAAcW,YACzC,KACD,CACA,KACD,CACD,EACA,MAAM1D,MAAQ2D,WAAWpD,cAAcP,KAAK,GAAK,EACjD,GAAIA,MAAQ,GAAK,CAAC4D,MAAM5D,KAAK,EAAG,CAC/B2B,MAAM,IAAIkC,QAAQC,GAAWC,WAAWD,EAAS9D,KAAK,CAAC,CACxD,CACA8C,aAAa,EACbO,oBAAoB,EACpBC,YAAY,EACZ,MAAMU,mBAAqBjD,cAAcR,cAAcN,aAAe,IAAI,EAC1E,MAAMC,kBAAoBa,cAAcR,cAAcL,mBAAqB,IAAI,EAC/E,GAAI8D,mBAAoB,CACvBrC,MAAMsC,cAAcD,mBAAoB9D,iBAAiB,CAC1D,CACA,OAAO,IACR,CAEA,SAASgE,mBAAmB5D,EAAI6D,EAAY,MAC3C,GAAI,CAAC7D,GAAM,CAACA,EAAG8D,cAAe,OAC9B,GAAI,CAACD,EAAW,CACf,IAAK,MAAME,KAAQ/D,EAAG8D,cAAe,CACpCF,mBAAmB5D,EAAI+D,CAAI,CAC5B,CACA,MACD,CACA,GAAI,CAAC/D,EAAG8D,cAAcD,GAAY,OAClC,GAAI7D,EAAG8D,cAAcE,UAAYhE,EAAG8D,cAAcE,SAASH,GAAY,CACtE7D,EAAGiE,oBAAoBJ,EAAW7D,EAAG8D,cAAcE,SAASH,EAAU,EACtE,OAAO7D,EAAG8D,cAAcE,SAASH,EAClC,CACA,GAAI7D,EAAG8D,cAAcD,GAAY,CAChC7D,OAAQ6D,KAAe7D,EAAG8D,cAAcD,GACxC,OAAO7D,EAAG8D,cAAcD,EACzB,KAAO,CACN7D,OAAQ6D,KAAe,IACxB,CACA,GAAI7D,EAAG8D,cAAcE,UAAY9D,OAAOgE,KAAKlE,EAAG8D,cAAcE,QAAQ,EAAEzB,SAAW,EAAG,CACrF,OAAOvC,EAAG8D,aACX,CACD,CAEA,SAASK,gBAAgBnE,EAAI6D,EAAY,QAASO,EAAS,MAC1D,GAAI,CAACpE,EAAI,OACT,GAAIA,EAAG8D,eAAiB9D,EAAG8D,cAAcD,GAAY,OACrD7D,EAAG8D,cAAgB9D,EAAG8D,eAAiB,GACvC9D,EAAG8D,cAAcD,GAAa7D,OAAQ6D,MAAgB,KACtD7D,OAAQ6D,KAAe,KAEvB,SAASQ,EAAcrE,EAAIoE,GAC1B9D,IAAIgE,EAAUxE,eAAgByE,GAC7BA,EAAMC,eAAe,EACrBD,EAAME,gBAAgB,EACtBnE,IAAIoE,EAAe,KACnBpE,IAAIqE,EAAY,KAChBrE,IAAIsE,EAAUC,kBAAkB7E,EAAII,aAAaC,qBAAsB+D,EAAQ,IAAI,EACnF,GAAIQ,GAAW1E,OAAOgE,KAAKU,CAAO,EAAErC,OAAS,EAAG,CAC/CqC,EAAU1E,OAAOC,OAAO,GAAIC,aAAaC,qBAAsBuE,GAAW,EAAE,EAC5EF,EAAerD,MAAMtB,cAAcC,EAAI4E,CAAO,EAC9C,GAAIF,GAAgBE,EAAQ/E,OAAQ,CACnC,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACAA,EAAYK,aAAaJ,EAAQ/E,MAAM,CACxC,CACD,CACAS,IAAI2E,EAAI,EACR,MAAOP,EAAc,CACpBE,EAAUC,kBAAkB7E,EAAII,aAAaC,wBAAyB+D,KAAUa,IAAK,IAAI,EACzF,GAAIL,GAAW1E,OAAOgE,KAAKU,CAAO,EAAErC,OAAS,EAAG,CAC/C,MAAM2C,EAAcN,EAAQ/E,SAAW,MAAQ+E,EAAQ/E,SAAW,IAAM+E,EAAQ/E,SAAW,SAAW+E,EAAQ/E,SAAW,KAAO+E,EAAQ/E,SAAW,MACnJ+E,EAAU1E,OAAOC,OAAO,GAAIC,aAAaC,qBAAsBuE,GAAW,EAAE,EAC5EF,EAAerD,MAAMtB,cAAcC,EAAI4E,CAAO,EAC9C,GAAIM,EAAa,CAChB,GAAIP,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACD,CACA,GAAID,GAAgBE,EAAQ/E,OAAQ,CACnC,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACAA,EAAYK,aAAaJ,EAAQ/E,MAAM,CACxC,CACAoF,CAAC,EACF,KAAO,CACN,KACD,CACD,CACA,GAAIP,EAAc,CACjBE,EAAUC,kBAAkB7E,EAAII,aAAaC,wBAAyB+D,SAAe,IAAI,EACzF,GAAIQ,GAAW1E,OAAOgE,KAAKU,CAAO,EAAErC,OAAS,EAAG,CAC/CqC,EAAU1E,OAAOC,OAAO,GAAIC,aAAaC,qBAAsBuE,GAAW,EAAE,EAC5EvD,MAAMtB,cAAcC,EAAI4E,CAAO,EAC/B,GAAIA,EAAQ/E,SAAW,KAAM,CAC5B,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACD,CACA,GAAID,GAAgBE,EAAQ/E,OAAQ,CACnC,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACAA,EAAYK,aAAaJ,EAAQ/E,MAAM,CACxC,CACD,CACD,CACA+E,EAAUC,kBAAkB7E,EAAII,aAAaC,wBAAyB+D,YAAkB,IAAI,EAC5F,GAAIQ,GAAW1E,OAAOgE,KAAKU,CAAO,EAAErC,OAAS,EAAG,CAC/CqC,EAAU1E,OAAOC,OAAO,GAAIC,aAAaC,qBAAsBuE,GAAW,EAAE,EAC5EvD,MAAMtB,cAAcC,EAAI4E,CAAO,EAC/B,GAAIA,EAAQ/E,SAAW,KAAM,CAC5B,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACD,CACA,GAAID,GAAgBE,EAAQ/E,OAAQ,CACnC,GAAI8E,EAAW,CACdA,EAAUG,MAAMC,KAAK,EACrBJ,EAAY,IACb,CACAA,EAAYK,aAAaJ,EAAQ/E,MAAM,CACxC,CACD,CACA,GAAI6E,EAAc,CACjB,GAAI1E,EAAG8D,eAAiB9D,EAAG8D,cAAcD,GAAY,CACpD7D,EAAG8D,cAAcD,GAAW5C,KAAKjB,CAAE,EAAEuE,CAAK,CAC3C,CACD,CACA,GAAII,EAAW,CACdA,EAAUG,MAAMC,KAAK,CACtB,CACD,EACA,OAAOT,CACR,CAEA,SAASa,EAAWnF,EAAI6D,EAAWS,GAClCtE,EAAGoF,iBAAiBvB,EAAWS,CAAO,EACtCtE,EAAG8D,cAAcE,SAAWhE,EAAG8D,cAAcE,UAAY,GACzDhE,EAAG8D,cAAcE,SAASH,GAAaS,CACxC,CACAa,EAAWnF,EAAI6D,EAAWQ,EAAcrE,EAAIoE,CAAM,CAAC,CACpD,CACA,MAAMhE,aAAe,CACpBvB,QAASkB,cACToE,gBAAiBA,gBACjBkB,gBAAiBrF,GAAMmE,gBAAgBnE,EAAI,QAAS,IAAI,EACxDsF,iBAAkBtF,GAAMmE,gBAAgBnE,EAAI,SAAU,IAAI,EAC1D4D,mBAAoBA,mBACpB2B,mBAAoBvF,GAAM4D,mBAAmB5D,EAAI,OAAO,EACxDwF,oBAAqBxF,GAAM4D,mBAAmB5D,EAAI,QAAQ,EAC1DK,qBAAsB9B,uBACtBkH,QAAS,OACV,EACA9E,SAASyE,iBAAiB,mBAAoB,KAC7C,MAAMM,EAAiBxF,OAAOgE,KAAK9D,aAAaC,oBAAoB,EAAEsF,IAAIC,eAAmBC,iBAAiBD,CAAG,iBAAiBC,iBAAiBD,CAAG,IAAI,EAAEE,KAAK,GAAG,EACpK,MAAMC,EAAkB7F,OAAOgE,KAAK9D,aAAaC,oBAAoB,EAAEsF,IAAIC,eAAmBC,iBAAiBD,CAAG,iBAAiBC,iBAAiBD,CAAG,IAAI,EAAEE,KAAK,GAAG,EACrKnF,SAASC,oBAAoB8E,GAAgB,EAAE9C,QAAQ5C,IACtDmE,gBAAgBnE,EAAI,QAAS,IAAI,CAClC,CAAC,EACDW,SAASC,oBAAoBmF,GAAiB,EAAEnD,QAAQ5C,IACvDmE,gBAAgBnE,EAAI,SAAU,IAAI,CACnC,CAAC,CACF,CAAC,EACD3B,QAAQ+B,aAAeA,aAEvB,SAAS4F,iBAAiBC,GACzB,OAAOA,EAAIC,QAAQ,YAAaC,GAAKA,EAAE,GAAGC,YAAY,CAAC,CACxD,CAEA,SAASP,iBAAiBI,GACzBA,EAAMA,EAAIC,QAAQ,YAAaC,OAASA,GAAG,EAC3CF,EAAMA,EAAIC,QAAQ,SAAUC,OAASA,EAAE,GAAGE,YAAY,GAAG,EACzDJ,EAAMA,EAAIC,QAAQ,OAAQ,GAAG,EAC7BD,EAAMA,EAAIC,QAAQ,MAAO,EAAE,EAAEA,QAAQ,MAAO,EAAE,EAC9C,OAAOD,CACR,CAEA,SAASxF,cAAc6F,GACtB,GAAIA,IAAU,MAAQA,IAAUC,UAAW,CAC1C,OAAO,IACR,CACA,GAAI,OAAOD,IAAU,SAAU,CAC9B,OAAOA,CACR,CACAA,EAAQA,EAAMvE,KAAK,EACnB,GAAIuE,IAAU,GAAI,CACjB,OAAO,IACR,CACA,OAAOA,CACR,CAEA,SAASzB,kBAAkB7E,EAAIwG,EAAgBpC,EAAQqC,EAAe,OACrEnG,IAAIsE,EAAU,GACd,MAAM8B,EAAYtC,KAAYyB,iBAAiBzB,CAAM,KAAO,GAC5D,IAAK,MAAMuC,KAAUzG,OAAOgE,KAAKsC,CAAc,EAAG,CACjD,MAAMI,EAAgBF,EAAYb,iBAAiBc,CAAM,EACzD,MAAME,EAAiB7G,EAAG8G,QAAQF,IAAkB5G,EAAG+G,qBAAqBH,GAAe,EAC3F,GAAIC,IAAmB,MAAQA,IAAmBN,UAAW,CAC5D,GAAI,OAAOC,EAAeG,KAAY,UAAW,CAChD/B,EAAQ+B,GAAUE,EAAeR,YAAY,IAAM,MACpD,MAAO,GAAI,OAAOG,EAAeG,KAAY,SAAU,CACtD/B,EAAQ+B,GAAUtD,WAAWwD,CAAc,CAC5C,KAAO,CACNjC,EAAQ+B,GAAUE,CACnB,CACD,KAAO,CACN,GAAI,CAACJ,EAAc,CAClB7B,EAAQ+B,GAAUH,EAAeG,EAClC,CACD,CACD,CACA,OAAO/B,CACR,CACA,MAAMoC,sBAAwB,CAC7BC,MAAO,KACPC,KAAM,KACNC,cAAe,SACfC,cAAe,SACfC,eAAgB,cAChBC,eAAgB,gBAChBC,KAAM,KACNC,SAAU,KACVC,SAAU,SACVC,SAAU,KACVC,MAAO,KACPC,SAAU,KACVC,SAAU,KACVC,OAAQ,KACRC,QAAS,KACTC,OAAQ,KACRC,SAAU,KACVC,SAAU,IACX,EAEA,SAAS5G,cAAc6G,EAAShB,EAAgB,SAAUC,EAAgB,SAAUH,EAAQ,MAC3F,MAAMmB,EAAcC,cAAc,CACjCpB,MAAOA,EACPC,KAAMiB,EACNhB,cAAeA,EACfC,cAAeA,CAChB,CAAC,EACD,GAAI,CAACgB,EAAa,CACjB,OAAO,IAAI7E,QAAQ,CAACC,EAAS8E,KAC5B,GAAIhK,OAAOI,QAAQyJ,CAAO,EAAG,CAC5B3E,EAAQ,IAAI,CACb,KAAO,CACN8E,EAAO,KAAK,CACb,CACD,CAAC,CACF,CACA,OAAOF,CACR,CAEA,SAASzE,cAAcwE,EAAShB,EAAgB,KAAMF,EAAQ,MAC7D,MAAMmB,EAAcC,cAAc,CACjCpB,MAAOA,EACPC,KAAMiB,EACNhB,cAAeA,EACfC,cAAe,IAChB,CAAC,EACD,GAAI,CAACgB,EAAa,CACjB,OAAO,IAAI7E,QAAQC,IAClBlF,OAAOiK,MAAMJ,CAAO,EACpB3E,EAAQ,IAAI,CACb,CAAC,CACF,CACA,OAAO4E,CACR,CAEA,SAASpD,aAAawD,EAAgB,sEAAuEvB,EAAQ,MACpH,MAAMmB,EAAcC,cAAc,CACjCpB,MAAOA,EACPC,KAAMsB,EACNrB,cAAe,KACfC,cAAe,KACfK,SAAU,SACVC,SAAU,MACVC,MAAO,KACR,CAAC,EACD,OAAOS,CACR,CAEA,SAASC,cAAczD,EAAU,IAChC,GAAI,OAAO6D,YAAc,aAAe,CAACA,UAAUC,MAAO,CACzD5H,QAAQC,KAAK,mEAAmE,EAChF,OAAO,IACR,CACA6D,EAAU1E,OAAOC,OAAO,GAAI6G,sBAAuBpC,GAAW,EAAE,EAChE,GAAI,CAACA,EAAQqC,OAAS,CAACrC,EAAQsC,MAAQ,CAACtC,EAAQuC,eAAiB,CAACvC,EAAQwC,cAAe,CACxFtG,QAAQD,MAAM,6FAA6F,EAC3G,OAAO,IACR,CACA,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,OAAO8H,QAAQ/D,EAAQ2C,IAAI,IAAM,CAAC,EAAG,CACjE3C,EAAQ2C,KAAO,IAChB,CACA,GAAI3C,EAAQ2C,OAAS,KAAM,CAC1B3C,EAAQ2C,KAAO,EAChB,KAAO,CACN3C,EAAQ2C,cAAgB3C,EAAQ2C,MACjC,CACA,GAAI,OAAO3C,EAAQ4C,WAAa,UAAW,CAC1C5C,EAAQ4C,SAAWR,sBAAsBQ,QAC1C,CACA,GAAI5C,EAAQ6C,WAAa,MAAQ7C,EAAQ6C,WAAa,OAAS7C,EAAQ6C,WAAa,SAAU,CAC7F7C,EAAQ6C,SAAWT,sBAAsBS,QAC1C,CACA,GAAI,OAAO7C,EAAQ8C,WAAa,UAAW,CAC1C9C,EAAQ8C,SAAWV,sBAAsBU,QAC1C,CACA,GAAI,OAAO9C,EAAQ+C,QAAU,UAAW,CACvC/C,EAAQ+C,MAAQX,sBAAsBW,KACvC,CACA,GAAI/C,EAAQuC,gBAAkB,MAAQ,OAAOvC,EAAQuC,gBAAkB,SAAU,CAChFvC,EAAQuC,cAAgBH,sBAAsBG,aAC/C,CACA,GAAIvC,EAAQwC,gBAAkB,MAAQ,OAAOxC,EAAQwC,gBAAkB,SAAU,CAChFxC,EAAQwC,cAAgBJ,sBAAsBI,aAC/C,CACA,GAAIxC,EAAQsD,WAAa,MAAQtD,EAAQsD,WAAa,MAAO,CAC5DtD,EAAQsD,SAAWlB,sBAAsBkB,QAC1C,CACAtD,EAAQuC,cAAgB1G,cAAcmE,EAAQuC,aAAa,EAC3DvC,EAAQwC,cAAgB3G,cAAcmE,EAAQwC,aAAa,EAC3DxC,EAAQqC,MAAQxG,cAAcmE,EAAQqC,KAAK,EAC3CrC,EAAQsC,KAAOzG,cAAcmE,EAAQsC,IAAI,EACzC,GAAItC,EAAQgD,UAAY,OAAOhD,EAAQgD,WAAa,WAAY,CAC/DhD,EAAQgD,SAAW,IACpB,CACA,GAAIhD,EAAQiD,UAAY,OAAOjD,EAAQiD,WAAa,WAAY,CAC/DjD,EAAQiD,SAAW,IACpB,CACA,GAAIjD,EAAQkD,QAAU,OAAOlD,EAAQkD,SAAW,WAAY,CAC3DlD,EAAQkD,OAAS,IAClB,CACA,GAAIlD,EAAQmD,SAAW,OAAOnD,EAAQmD,UAAY,WAAY,CAC7DnD,EAAQmD,QAAU,IACnB,CACA,GAAInD,EAAQoD,QAAU,OAAOpD,EAAQoD,SAAW,WAAY,CAC3DpD,EAAQoD,OAAS,IAClB,CACA,GAAIpD,EAAQqD,UAAY,OAAOrD,EAAQqD,WAAa,WAAY,CAC/DrD,EAAQqD,SAAW,IACpB,CACA3H,IAAIsI,EAAiBjI,SAASkI,cAAc,KAAK,EACjDD,EAAeE;oBACGlE,EAAQ2C,uBAAuB3C,EAAQ6C,WAAa,MAAQ,2BAA6B7C,EAAQ6C,WAAa,SAAW,4BAA8B,MAAM7C,EAAQ8C,WAAa,MAAQ,2BAA6B,MAAM9C,EAAQ+C,QAAU,MAAQ,wBAA0B;6BACxQ/C,EAAQ4C,SAAW,wBAA0B;;QAElE5C,EAAQqC,QAAU,KAAO,wDAA0DrC,EAAQqC;QAC3FrC,EAAQsC,OAAS,KAAO,8BAAgCtC,EAAQsC;QAChEtC,EAAQuC,gBAAkB,MAAQvC,EAAQwC,gBAAkB,KAAO;;UAEjExC,EAAQwC,gBAAkB,KAAO,uCAAyCxC,EAAQ0C,2CAA2C1C,EAAQwC;UACrIxC,EAAQuC,gBAAkB,KAAO,uCAAyCvC,EAAQyC,mBAAmBzC,EAAQuC;;;;QAKrH,MAAM4B,EAAeH,EAAeI,cAAc,cAAc,EAChE,MAAMC,EAAeL,EAAeI,cAAc,gBAAgB,EAClE,MAAME,EAAeN,EAAeI,cAAc,QAAQ,EAC1DrI,SAASuG,KAAKiC,YAAYP,CAAc,EACxC,MAAM9D,EAAQ,IAAI2D,UAAUC,MAAMQ,CAAY,EAC9CtE,EAAU1E,OAAOC,OAAO,GAAI6G,sBAAuBpC,GAAW,EAAE,EAChE,MAAMwE,EAAU,IAAI7F,QAAQ,CAACC,EAAS8E,KACrC,GAAI1D,EAAQuC,cAAe,CAC1B4B,EAAa3D,iBAAiB,QAASiE,IACtC,GAAIzE,EAAQgD,UAAY,OAAOhD,EAAQgD,WAAa,WAAY,CAC/DhD,EAAQgD,SAASyB,EAAGH,CAAY,CACjC,CACA1F,EAAQ,QAAQ,EAChBsB,EAAMC,KAAK,CACZ,EAAG,CACFuE,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQwC,cAAe,CAC1B6B,EAAa7D,iBAAiB,QAASiE,IACtC,GAAIzE,EAAQiD,UAAY,OAAOjD,EAAQiD,WAAa,WAAY,CAC/DjD,EAAQiD,SAASwB,EAAGH,CAAY,CACjC,CACAZ,EAAO,QAAQ,EACfxD,EAAMC,KAAK,CACZ,EAAG,CACFuE,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQ8C,WAAa,KAAM,CAC9BwB,EAAa9D,iBAAiB,UAAWiE,IACxC,GAAIA,EAAEE,MAAQ,SAAU,CACvB,GAAI3E,EAAQiD,UAAY,OAAOjD,EAAQiD,WAAa,WAAY,CAC/DjD,EAAQiD,SAASwB,EAAGH,CAAY,CACjC,CACAZ,EAAO,QAAQ,EACfxD,EAAMC,KAAK,CACZ,CACD,EAAG,CACFuE,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQkD,QAAU,OAAOlD,EAAQkD,SAAW,WAAY,CAC3DoB,EAAa9D,iBAAiB,gBAAiBiE,IAC9CzE,EAAQkD,OAAOuB,EAAGH,CAAY,CAC/B,EAAG,CACFI,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQmD,SAAW,OAAOnD,EAAQmD,UAAY,WAAY,CAC7DmB,EAAa9D,iBAAiB,iBAAkBiE,IAC/CzE,EAAQmD,QAAQsB,EAAGH,CAAY,CAChC,EAAG,CACFI,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQoD,QAAU,OAAOpD,EAAQoD,SAAW,WAAY,CAC3DkB,EAAa9D,iBAAiB,gBAAiBiE,IAC9CzE,EAAQoD,OAAOqB,EAAGH,CAAY,CAC/B,EAAG,CACFI,KAAM,IACP,CAAC,CACF,CACA,GAAI1E,EAAQqD,UAAY,OAAOrD,EAAQqD,WAAa,WAAY,CAC/DiB,EAAa9D,iBAAiB,kBAAmBiE,IAChDzE,EAAQqD,SAASoB,EAAGH,CAAY,CACjC,EAAG,CACFI,KAAM,IACP,CAAC,CACF,CACAJ,EAAa9D,iBAAiB,gBAAiB,SAAUb,GACxD,GAAI5D,SAAS6I,cAAe,CAC3B7I,SAAS6I,cAAcC,KAAK,CAC7B,CACD,CAAC,EACDP,EAAa9D,iBAAiB,kBAAmBiE,IAChDvE,EAAM4E,QAAQ,EACdd,EAAejG,OAAO,CACvB,EAAG,CACF2G,KAAM,IACP,CAAC,CACF,CAAC,EACDxE,EAAM6E,KAAK,EACXP,EAAQtE,MAAQA,EAChB,OAAOsE,CACR,CACA,GAAE9K,MAAM"}